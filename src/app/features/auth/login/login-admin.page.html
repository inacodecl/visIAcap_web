<ion-content [fullscreen]="true" class="login-bg">
  <ion-grid fixed class="full-height-grid">
    <!-- Header Row: Botón Volver -->
    <ion-row class="header-row">
      <ion-col size="12">
        <button class="back-btn" (click)="goBack()" aria-label="Volver al inicio">
          <ion-icon name="arrow-back-outline"></ion-icon>
          <span>Volver</span>
        </button>
      </ion-col>
    </ion-row>

    <!-- Main Content Row: Tarjeta Centrada -->
    <ion-row class="ion-justify-content-center ion-align-items-center content-row">
      <ion-col size="12" size-sm="10" size-md="8" size-lg="8" size-xl="6">
        <ion-card class="login-card">
          <div class="login-header">
            <!-- Logo Placeholder: Reemplazar con activo real -->
            <h1 class="logo-text">INACAP <span class="highlight">Renca Smart</span></h1>
            <p class="subtitle">Acceso Administrativo</p>
          </div>

          <ion-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

              <div class="input-group">
                <ion-item lines="full" class="custom-item">
                  <ion-label position="floating">Correo Institucional</ion-label>
                  <ion-input type="email" formControlName="email">
                  </ion-input>
                </ion-item>
                <ion-text color="danger" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched"
                  class="error-text">
                  <small *ngIf="loginForm.get('email')?.errors?.['required']">El correo es obligatorio.</small>
                  <small *ngIf="loginForm.get('email')?.errors?.['email']">Formato de correo inválido.</small>
                </ion-text>
              </div>

              <div class="input-group">
                <ion-item lines="full" class="custom-item">
                  <ion-label position="floating">Contraseña</ion-label>
                  <ion-input type="password" formControlName="password">
                  </ion-input>
                </ion-item>
                <ion-text color="danger"
                  *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-text">
                  <small>La contraseña es obligatoria.</small>
                </ion-text>
              </div>

              <div class="error-message-box" *ngIf="errorMessage">
                <ion-text color="danger">{{ errorMessage }}</ion-text>
              </div>

              <div class="actions">
                <ion-button expand="block" type="submit" [disabled]="loginForm.invalid || isLoading" class="inacap-btn">
                  {{ isLoading ? 'Ingresando...' : 'Iniciar Sesión' }}
                </ion-button>
              </div>

            </form>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <!-- Footer Row -->
    <ion-row class="footer-row">
      <ion-col size="12" class="ion-text-center">
        <div class="footer-copy">
          <p>© 2025 INACAP Sede Renca | 60° Aniversario</p>
        </div>
      </ion-col>
    </ion-row>

  </ion-grid>
</ion-content>