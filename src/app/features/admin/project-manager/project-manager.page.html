<ion-header class="ion-no-border header-inacap">
    <div class="top-section">
        <div class="header-content">
            <ion-buttons slot="start" class="menu-btn-container">
                <ion-back-button defaultHref="/admin/dashboard" color="light"></ion-back-button>
            </ion-buttons>

            <div class="logo-container">
                <img src="assets/icon/logo-inacap-60.png" alt="Logo Inacap" class="logo-placeholder">
            </div>

            <div class="header-text">
                <span class="sede-text">SEDE<br>RENCA (ADMIN)</span>
            </div>
        </div>
    </div>

    <!-- Secondary Toolbar for Filter -->
    <ion-toolbar color="light">
        <ion-segment [value]="currentType()" (ionChange)="segmentChanged($event)" color="danger">
            <ion-segment-button value="presente">
                <ion-label>Sede (Presente)</ion-label>
            </ion-segment-button>
            <ion-segment-button value="futuro">
                <ion-label>Innovación (Futuro)</ion-label>
            </ion-segment-button>
        </ion-segment>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" [scrollY]="true" class="admin-content">
    <div class="container-fluid">

        <!-- HEADER ACTIONS -->
        <div class="actions-header ion-margin-bottom">
            <div class="search-container">
                <ion-searchbar [debounce]="500" [searchIcon]="'rocket'" placeholder="Buscar proyecto..."
                    (ionInput)="searchTerm.set($event.detail.value || '')"></ion-searchbar>
            </div>
            <ion-button (click)="openCreateModal()" color="danger" shape="round" class="action-btn">
                <ion-icon name="add" slot="start"></ion-icon>
                Nuevo Proyecto
            </ion-button>
        </div>

        <!-- QUICK STATS -->
        <ion-grid class="stats-grid ion-margin-bottom">
            <ion-row>
                <ion-col size="12" size-md="4">
                    <ion-card class="stat-card" (click)="openTagsManager()">
                        <ion-card-content>
                            <div class="stat-icon"><ion-icon name="pricetags"></ion-icon></div>
                            <div class="stat-info">
                                <h3>Etiquetas</h3>
                                <p>Gestionar Tags</p>
                            </div>
                            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
                        </ion-card-content>
                    </ion-card>
                </ion-col>
                <ion-col size="12" size-md="4">
                    <ion-card class="stat-card" (click)="openCategoriesManager()">
                        <ion-card-content>
                            <div class="stat-icon"><ion-icon name="list"></ion-icon></div>
                            <div class="stat-info">
                                <h3>Categorías</h3>
                                <p>Gestionar Categorías</p>
                            </div>
                            <ion-icon name="arrow-forward" class="arrow"></ion-icon>
                        </ion-card-content>
                    </ion-card>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- PROJECTS GRID -->
        <ion-grid>
            <ion-row>
                <ion-col size="12" size-md="6" size-lg="4" *ngFor="let p of filteredProyectos()">
                    <ion-card class="project-card">
                        <div class="card-image"
                            [style.background-image]="'url(' + (p.image_cover_url || 'assets/images/placeholder.jpg') + ')'">
                            <ion-badge color="danger" class="status-badge" *ngIf="!p.is_published">Borrador</ion-badge>
                            <ion-badge color="success" class="status-badge" *ngIf="p.is_published">Publicado</ion-badge>
                        </div>
                        <ion-card-header>
                            <ion-card-title>{{ p.titulo }}</ion-card-title>
                        </ion-card-header>
                        <ion-card-content>
                            <p class="slug-text">/{{ p.slug }}</p>
                            <div class="card-actions">
                                <ion-button fill="clear" size="small" (click)="openEditModal(p)">
                                    <ion-icon name="create" slot="icon-only"></ion-icon>
                                </ion-button>
                                <ion-button fill="clear" color="danger" size="small" (click)="deleteProyecto(p.id)">
                                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                                </ion-button>
                            </div>
                        </ion-card-content>
                    </ion-card>
                </ion-col>
            </ion-row>
        </ion-grid>

        <!-- EMPTY STATE -->
        <div class="empty-state" *ngIf="filteredProyectos().length === 0">
            <div class="empty-icon">
                <ion-icon name="rocket"></ion-icon>
            </div>
            <h3>No se encontraron proyectos</h3>
            <p>Intenta con otra búsqueda o crea uno nuevo.</p>
        </div>

    </div>
</ion-content>